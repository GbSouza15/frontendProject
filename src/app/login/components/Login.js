'use client'

import { useState } from "react"
import { useRouter } from "next/navigation"
import url from "@/app/configUrl/urlConfig"

export default function Login() {
    
    const router = useRouter()

    const [email, setEmail] = useState('')
    const [password, setPassword] = useState('')

    const handleLogin = async (e) => {
        e.preventDefault();
        const userData = {
            email: email,
            password: password
        };

        if (!email) {
            return alert('Email inválido!')
        }
        if (!password) {
            return alert('Senha inválida!')
        }

        try {

            const response = await fetch(`${url}/user/login`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(userData)
            });
            if (response.ok) {
              const { token } = await response.json()
          
              if (token) {
                localStorage.setItem('token', token);
                router.push('/');
                router.refresh()
              } else {
                alert('Senha incorreta. Tente novamente!');
              }
            } else {
              console.log(response.status);
              alert('Usuário não encontrado. Verifique se o email e senha estão corretos ou crie uma conta!');
            }
          } catch (error) {
            console.log(error);
            alert('Ocorreu um erro ao tentar fazer login. Tente novamente mais tarde.');
          }
    }

    return (
        <section className="bg-black h-[100vh] flex items-center justify-center">
            <div className="flex bg-white items-center justify-center w-[55rem] gap-[5rem] p-[2rem] rounded-[.5rem]">
                <svg className="w-[15rem] h-[15rem] shadow-lg bg-white" version="1.0" xmlns="http://www.w3.org/2000/svg"
    width="500.000000pt" height="500.000000pt" viewBox="0 0 500.000000 500.000000"
    preserveAspectRatio="xMidYMid meet">

    <g transform="translate(0.000000,500.000000) scale(0.100000,-0.100000)"
    fill="#000000" stroke="none">
    <path d="M2388 4241 c-93 -103 -138 -226 -138 -376 0 -146 45 -269 137 -374
    l45 -51 62 0 c288 0 555 267 556 556 0 70 -12 78 -103 71 -82 -7 -167 -34
    -242 -76 l-51 -29 -18 68 c-29 114 -131 260 -182 260 -14 0 -39 -18 -66 -49z
    m133 -159 c79 -161 58 -380 -49 -512 l-20 -24 -40 62 c-56 86 -76 167 -70 284
    6 104 29 179 80 249 l31 43 24 -30 c13 -16 33 -48 44 -72z m439 -120 c0 -33
    -31 -126 -62 -184 -38 -72 -126 -157 -204 -196 -59 -29 -124 -49 -124 -38 0 4
    13 33 29 65 32 63 61 162 61 209 0 49 104 118 225 148 69 17 75 17 75 -4z"/>
    <path d="M3276 3555 c-28 -10 -82 -56 -177 -151 l-137 -137 -44 12 c-31 8
    -165 11 -473 9 -428 -3 -430 -3 -475 -26 -66 -35 -460 -429 -460 -461 0 -19
    45 -70 178 -203 97 -98 187 -181 200 -185 19 -4 39 10 116 86 l93 91 317 0
    c256 0 322 3 344 14 33 18 705 692 721 723 20 39 14 126 -12 163 -42 64 -122
    91 -191 65z m108 -105 c11 -11 19 -32 19 -50 0 -28 -38 -70 -344 -376 l-344
    -344 -324 0 -323 0 -85 -82 -84 -82 -142 142 -142 142 180 181 c99 99 197 189
    217 200 35 18 62 19 456 19 406 0 419 -1 440 -20 47 -44 31 -114 -29 -131 -13
    -4 -124 -7 -245 -8 -241 -1 -253 -4 -240 -56 l7 -26 263 3 263 3 35 27 c50 38
    75 106 61 161 l-12 42 127 129 c157 159 192 177 246 126z"/>
    <path d="M1671 2024 c-97 -26 -155 -76 -181 -158 -26 -81 15 -181 96 -235 26
    -17 83 -44 128 -61 182 -68 198 -81 198 -148 0 -126 -255 -118 -281 8 l-7 35
    -82 3 -82 3 0 -33 c1 -42 30 -106 65 -141 128 -127 398 -130 509 -6 39 43 50
    85 44 165 -9 107 -83 172 -265 235 -149 51 -196 110 -140 174 27 33 91 46 150
    33 51 -11 75 -32 85 -72 l8 -31 82 -3 82 -3 0 32 c0 46 -48 127 -95 159 -83
    57 -203 74 -314 44z"/>
    <path d="M2367 2030 c-84 -21 -164 -84 -188 -147 -15 -41 -10 -121 10 -161 37
    -72 96 -111 251 -168 122 -44 160 -74 160 -127 0 -66 -76 -108 -168 -92 -65
    11 -100 39 -114 90 l-12 45 -84 0 -85 0 7 -41 c21 -128 133 -215 294 -226 188
    -13 314 64 329 200 8 72 -13 126 -71 183 -53 51 -65 57 -261 129 -63 23 -95
    55 -95 95 0 56 23 77 100 94 65 14 160 -42 160 -94 0 -18 7 -20 86 -20 l86 0
    -7 37 c-24 128 -123 202 -279 209 -45 2 -98 -1 -119 -6z"/>
    <path d="M3073 2022 c-138 -49 -214 -155 -233 -322 -33 -292 96 -484 335 -498
    l79 -5 79 -63 c44 -35 83 -64 87 -64 4 0 30 20 57 45 l48 44 -35 28 c-19 15
    -48 40 -64 54 l-30 26 42 48 c70 79 86 136 87 300 0 124 -3 147 -24 203 -30
    80 -95 153 -168 188 -73 36 -184 43 -260 16z m205 -150 c16 -12 41 -43 54 -70
    21 -42 23 -61 23 -182 0 -124 -2 -139 -25 -185 -33 -66 -77 -95 -145 -95 -65
    0 -110 28 -145 90 -22 40 -25 59 -28 165 -5 171 21 248 98 288 46 24 126 19
    168 -11z"/>
    <path d="M1103 805 c-1 -38 1 -61 4 -50 2 11 6 30 9 43 2 12 11 22 19 22 8 0
    17 -10 19 -22 13 -58 14 -60 13 -18 -2 41 -4 45 -29 48 -18 2 -28 10 -31 25
    -2 12 -4 -9 -4 -48z"/>
    <path d="M2130 807 l0 -64 35 -1 c29 -1 36 3 41 23 9 37 -4 65 -32 65 -17 0
    -24 5 -24 20 0 11 -4 20 -10 20 -6 0 -10 -28 -10 -63z m64 -3 c8 -20 -12 -56
    -27 -51 -14 4 -21 32 -13 53 7 19 32 18 40 -2z"/>
    <path d="M2270 805 c0 -37 4 -65 10 -65 6 0 10 28 10 65 0 37 -4 65 -10 65 -6
    0 -10 -28 -10 -65z"/>
    <path d="M3480 850 c0 -13 -7 -20 -20 -20 -28 0 -45 -36 -31 -66 8 -18 19 -24
    41 -24 l30 0 0 65 c0 37 -4 65 -10 65 -5 0 -10 -9 -10 -20z m0 -66 c0 -28 -3
    -35 -17 -32 -31 6 -29 68 2 68 11 0 15 -10 15 -36z"/>
    <path d="M3863 805 c0 -38 2 -53 4 -32 2 20 2 52 0 70 -2 17 -4 1 -4 -38z"/>
    <path d="M517 854 c-15 -16 -5 -36 28 -55 19 -12 35 -25 35 -30 0 -19 -31 -21
    -50 -4 -17 15 -20 16 -20 3 0 -29 59 -38 80 -13 15 18 -1 42 -37 56 -13 5 -23
    15 -23 24 0 18 31 20 49 3 11 -11 13 -10 9 2 -5 16 -59 26 -71 14z"/>
    <path d="M619 844 c-11 -14 -10 -19 10 -35 13 -11 29 -19 37 -19 19 0 18 -29
    -1 -37 -9 -3 -25 3 -35 12 -21 19 -28 7 -8 -13 25 -25 78 -8 78 26 0 7 -16 20
    -35 28 -19 8 -35 19 -35 24 0 16 30 24 43 11 17 -17 31 -13 17 4 -16 20 -54
    19 -71 -1z"/>
    <path d="M732 848 c-34 -43 -16 -94 41 -113 20 -7 37 -9 37 -4 0 5 -5 9 -12 9
    -9 0 -9 3 0 12 16 16 16 80 0 96 -16 16 -53 15 -66 0z m60 -23 c8 -19 8 -31 0
    -50 -19 -42 -62 -25 -62 25 0 50 43 67 62 25z"/>
    <path d="M1752 833 c-8 -8 -9 -13 -2 -13 5 0 10 -18 10 -40 0 -31 4 -40 17
    -40 13 0 14 3 5 12 -14 14 -16 65 -3 70 5 2 4 8 -3 14 -8 8 -15 7 -24 -3z"/>
    <path d="M2358 839 c-2 -7 -1 -30 2 -53 4 -31 10 -42 25 -44 15 -2 16 -1 7 6
    -8 5 -13 24 -12 43 1 19 2 40 1 47 -1 15 -18 16 -23 1z"/>
    <path d="M3938 838 c-3 -7 -1 -32 4 -55 7 -31 14 -43 26 -42 11 0 12 3 5 6
    -16 6 -17 73 -2 73 6 0 4 7 -5 15 -18 18 -23 19 -28 3z"/>
    <path d="M4452 835 c-7 -8 -8 -15 -3 -15 5 0 11 -17 13 -37 5 -55 23 -51 21 4
    -1 27 -2 51 -2 56 -1 11 -15 8 -29 -8z"/>
    <path d="M972 793 c14 -54 24 -59 38 -21 l13 33 10 -32 c13 -43 21 -42 35 6
    15 47 15 54 2 46 -5 -3 -10 -15 -10 -26 0 -27 -17 -24 -24 6 -9 34 -21 31 -33
    -7 l-10 -33 -7 33 c-4 17 -11 32 -16 32 -5 0 -4 -17 2 -37z"/>
    <path d="M1202 818 c-15 -15 -15 -51 0 -66 14 -14 58 -16 58 -4 0 5 -10 8 -21
    8 -12 -1 -24 5 -26 12 -3 8 6 12 26 12 19 0 31 5 31 13 0 18 -21 37 -40 37 -9
    0 -21 -5 -28 -12z m46 -16 c2 -7 -6 -12 -17 -12 -21 0 -27 11 -14 24 9 9 26 2
    31 -12z"/>
    <path d="M1292 783 c1 -40 2 -42 5 -13 2 19 11 41 20 48 15 11 14 12 -5 12
    -20 0 -22 -5 -20 -47z"/>
    <path d="M1352 818 c-29 -29 -7 -78 35 -78 13 0 23 4 23 8 0 5 -10 8 -21 8
    -12 -1 -24 5 -26 12 -3 8 6 12 26 12 19 0 31 5 31 13 0 18 -21 37 -40 37 -9 0
    -21 -5 -28 -12z m46 -16 c2 -7 -6 -12 -17 -12 -21 0 -27 11 -14 24 9 9 26 2
    31 -12z"/>
    <path d="M1487 823 c-15 -14 -6 -33 18 -39 14 -3 25 -12 25 -20 0 -17 -22 -18
    -39 -1 -11 10 -13 9 -9 -3 7 -22 62 -20 66 3 3 12 -6 21 -27 28 -33 12 -32 34
    0 26 11 -3 19 -1 19 4 0 10 -43 12 -53 2z"/>
    <path d="M1574 790 c1 -43 2 -45 34 -48 32 -3 32 -3 32 42 0 55 -17 62 -22 9
    -4 -53 -31 -51 -39 2 l-7 40 2 -45z"/>
    <path d="M1667 823 c-15 -14 -6 -33 18 -39 14 -3 25 -12 25 -20 0 -17 -22 -18
    -39 -1 -11 10 -13 9 -9 -3 3 -9 17 -15 34 -15 39 0 46 31 10 45 -35 13 -34 34
    0 26 17 -5 23 -3 19 4 -7 11 -48 14 -58 3z"/>
    <path d="M1815 820 c-4 -7 2 -9 19 -4 34 8 35 -13 0 -26 -37 -14 -28 -44 14
    -48 l33 -3 -3 43 c-3 38 -6 43 -30 46 -14 2 -29 -2 -33 -8z m45 -49 c0 -14
    -18 -23 -30 -16 -6 4 -8 11 -5 16 8 12 35 12 35 0z"/>
    <path d="M1900 785 c0 -25 5 -45 10 -45 6 0 10 20 10 45 0 25 -4 45 -10 45 -5
    0 -10 -20 -10 -45z"/>
    <path d="M1940 783 c0 -53 18 -58 22 -5 2 25 8 37 18 37 10 0 16 -12 18 -37 4
    -46 22 -51 22 -5 0 44 -10 56 -48 55 -31 -1 -32 -2 -32 -45z"/>
    <path d="M2045 820 c-4 -7 2 -9 19 -4 34 8 35 -13 0 -26 -37 -14 -28 -44 14
    -48 l33 -3 -3 43 c-3 38 -6 43 -30 46 -14 2 -29 -2 -33 -8z m45 -49 c0 -14
    -18 -23 -30 -16 -6 4 -8 11 -5 16 8 12 35 12 35 0z"/>
    <path d="M2230 785 c0 -25 5 -45 10 -45 6 0 10 20 10 45 0 25 -4 45 -10 45 -5
    0 -10 -20 -10 -45z"/>
    <path d="M2323 785 c0 -27 2 -38 4 -22 2 15 2 37 0 50 -2 12 -4 0 -4 -28z"/>
    <path d="M2410 820 c0 -6 6 -26 14 -45 13 -30 13 -37 0 -49 -17 -17 -18 -26
    -3 -26 5 0 18 19 28 43 27 62 34 87 22 87 -5 0 -13 -15 -17 -32 l-7 -33 -14
    33 c-13 32 -23 41 -23 22z"/>
    <path d="M2577 823 c-15 -14 -6 -33 18 -39 14 -3 25 -12 25 -20 0 -17 -22 -18
    -39 -1 -11 10 -13 9 -9 -3 3 -9 17 -15 34 -15 39 0 46 31 10 45 -35 13 -34 34
    0 26 17 -5 23 -3 19 4 -7 11 -48 14 -58 3z"/>
    <path d="M2665 820 c-4 -7 1 -9 18 -5 37 10 42 -11 6 -24 -42 -15 -36 -46 9
    -47 33 -1 33 0 30 40 -3 36 -6 41 -30 44 -14 2 -29 -2 -33 -8z m45 -55 c-7 -8
    -16 -15 -21 -15 -5 0 -9 7 -9 15 0 9 9 15 21 15 18 0 19 -2 9 -15z"/>
    <path d="M2750 821 c0 -21 32 -83 39 -75 12 13 32 76 27 82 -3 2 -11 -11 -19
    -29 l-13 -34 -12 33 c-10 30 -22 43 -22 23z"/>
    <path d="M2840 785 c0 -25 5 -45 10 -45 6 0 10 20 10 45 0 25 -4 45 -10 45 -5
    0 -10 -20 -10 -45z"/>
    <path d="M2881 783 c1 -26 3 -39 6 -28 2 11 6 30 9 43 2 12 11 22 19 22 8 0
    17 -10 19 -22 13 -58 14 -60 13 -18 -2 43 -3 45 -34 48 l-33 3 1 -48z"/>
    <path d="M2979 809 c-15 -29 3 -69 31 -69 11 0 20 -5 20 -11 0 -7 -10 -9 -25
    -7 -27 6 -34 -6 -9 -16 8 -3 24 -1 35 4 15 9 19 22 19 65 0 54 0 55 -30 55
    -20 0 -33 -7 -41 -21z m51 -25 c0 -28 -3 -35 -17 -32 -31 6 -29 68 2 68 11 0
    15 -10 15 -36z"/>
    <path d="M3077 823 c-15 -14 -6 -33 18 -39 14 -3 25 -12 25 -20 0 -17 -22 -18
    -39 -1 -11 10 -13 9 -9 -3 3 -9 17 -15 34 -15 39 0 46 31 10 45 -35 13 -34 34
    0 26 17 -5 23 -3 19 4 -7 11 -48 14 -58 3z"/>
    <path d="M3245 820 c-4 -7 2 -9 19 -4 34 8 35 -13 0 -26 -37 -14 -28 -44 14
    -48 l33 -3 -3 43 c-3 38 -6 43 -30 46 -14 2 -29 -2 -33 -8z m45 -49 c0 -14
    -18 -23 -30 -16 -6 4 -8 11 -5 16 8 12 35 12 35 0z"/>
    <path d="M3330 786 c0 -55 17 -62 22 -8 4 52 31 50 39 -3 l7 -40 -2 45 c-1 43
    -2 45 -33 48 -33 3 -33 3 -33 -42z"/>
    <path d="M3574 816 c-3 -8 -4 -27 -2 -43 2 -22 9 -29 30 -31 18 -2 28 -10 31
    -25 2 -12 5 8 6 46 l1 67 -30 0 c-17 0 -33 -6 -36 -14z m51 -31 c0 -39 -31
    -48 -41 -11 -7 30 2 48 24 44 11 -2 17 -13 17 -33z"/>
    <path d="M3674 790 c1 -43 2 -45 34 -48 32 -3 32 -3 32 42 0 55 -17 62 -22 9
    -4 -53 -31 -51 -39 2 l-7 40 2 -45z"/>
    <path d="M3765 820 c-4 -7 1 -9 18 -5 37 10 42 -11 6 -24 -42 -15 -36 -46 9
    -47 33 -1 33 0 30 40 -3 36 -6 41 -30 44 -14 2 -29 -2 -33 -8z m45 -55 c-7 -8
    -16 -15 -21 -15 -5 0 -9 7 -9 15 0 9 9 15 21 15 18 0 19 -2 9 -15z"/>
    <path d="M3903 785 c0 -27 2 -38 4 -22 2 15 2 37 0 50 -2 12 -4 0 -4 -28z"/>
    <path d="M3990 826 c0 -2 7 -23 15 -47 14 -40 14 -45 0 -55 -9 -7 -12 -15 -7
    -18 13 -8 25 10 46 67 21 55 14 77 -7 26 l-14 -34 -7 33 c-4 17 -12 32 -17 32
    -5 0 -9 -2 -9 -4z"/>
    <path d="M4120 785 c0 -25 5 -45 10 -45 6 0 10 18 10 41 0 33 3 40 18 37 11
    -2 19 -16 23 -43 l5 -40 5 40 c3 28 9 41 22 43 14 3 17 -4 17 -37 0 -23 5 -41
    11 -41 6 0 9 17 7 43 l-3 42 -62 2 -63 3 0 -45z"/>
    <path d="M4282 818 c-15 -15 -16 -50 0 -66 15 -15 45 -16 54 -1 4 7 0 9 -13 5
    -12 -4 -25 -1 -33 9 -11 13 -8 15 19 15 28 0 32 3 29 23 -3 25 -36 35 -56 15z
    m46 -15 c2 -8 -5 -13 -17 -13 -12 0 -21 6 -21 16 0 18 31 15 38 -3z"/>
    <path d="M4372 818 c-29 -29 -7 -78 35 -78 13 0 23 4 23 8 0 5 -10 8 -21 8
    -12 -1 -24 5 -26 12 -3 8 6 12 26 12 19 0 31 5 31 13 0 18 -21 37 -40 37 -9 0
    -21 -5 -28 -12z m46 -16 c2 -7 -6 -12 -17 -12 -21 0 -27 11 -14 24 9 9 26 2
    31 -12z"/>
    <path d="M878 793 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"/>
    <path d="M2490 739 c0 -11 5 -17 10 -14 6 3 10 13 10 21 0 8 -4 14 -10 14 -5
    0 -10 -9 -10 -21z"/>
    <path d="M3157 740 c-3 -11 -2 -20 3 -20 12 0 21 28 11 35 -5 2 -11 -4 -14
    -15z"/>
    </g>
                </svg>

                <div className="">
                    <form className="flex flex-col gap-y-[1rem] bg-black text-white p-10 rounded-[.5rem]">
                        <label>
                            <p>EMAIL</p>
                            <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} className="border-2 border-black rounded-[.5rem] px-[1rem] text-black" placeholder="Ex: example@email.com"/>
                        </label>

                        <label>
                            <p>PASSWORD</p>
                            <input type="password" minLength="8" value={password} onChange={(e) => setPassword(e.target.value)} className="border-2 border-black px-[1rem] rounded-[.5rem] text-black"/>
                        </label>
                        
                        <p>Don't have an account? <a className="text-[#0057FF]" href="/register">Register.</a></p>

                        <button className="bg-[#E57F1A] rounded-[.5rem] p-[.5rem] mt-[1rem]" onClick={handleLogin}>LOGIN</button>
                    </form>

                </div>
            </div>
        </section>
    )
}